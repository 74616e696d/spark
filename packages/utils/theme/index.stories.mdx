import { Meta } from '@storybook/blocks'
import { StoryHeading } from '../../../documentation/helpers/StoryHeading/index'

<Meta title="utils/Theme" />

# Theme

- [Theme](#theme-interface)
- [defaultTheme](#default-theme)
- [createTheme](#createtheme)
- [createCSSTokensFile](#createcsstokensfile)
- [createTailwindThemeConfigFile](#createtailwindthemeconfigfile)
- [Practical example](#practical-example)

> **Note**
>
> Spark Design System is built using the **Tailwind CSS** framework

---

The **`packages/utils/theme`** exposes the following:

```tsx
import {
  Theme,
  defaultTheme,
  createTheme,
  createCSSTokensFile,
  createTailwindThemeConfigFile,
} from '@spark-ui/theme-utils'
```

<StoryHeading label="theme interface" as="h4" />

- `Theme`, the TypeScript interface for our theme

<StoryHeading label="default theme" as="h4" />

- `defaultTheme`, our default theme, represented as an `Object`

<StoryHeading label="createTheme" as="h4" />

- A function, that enables one to create a new theme by modifying specific values from the default theme without having to define a completely new theme from scratch.

This function expects one argument:

- A partial theme object which holds the theme values that need to be customized or overridden

**Usage:**

```tsx
const someTheme: PartialDeep<Theme> = { ... }
const newTheme = createTheme(someTheme)

```

<StoryHeading label="createCSSTokensFile" as="h4" />

- A function, that will generate a `css` file containing all of the theme tokens, represented as css custom properties.

This function expects two arguments:

- The file path where the `css` file will be created
- A `Record` (with a required key of "default") of themes that will be included in the `css` file

**Usage:**

```tsx
// createTokens.ts
const defaultTheme: Theme = { ... }
const darkTheme: Theme = { ... }
const otherTheme: Theme = { ... }

const themes = {
  default: defaultTheme,
  dark: darkTheme,
  other: otherTheme
}

createCSSTokensFile('./somePath.css', themes) ‚¨áÔ∏è

```

Executing `createTokens.ts` will generate a `somePath.css` file with the following structure:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* :root, derived from the "default" key ‚ÜîÔ∏è themes['default'] */

    --some-token: someValue;
    /* ... */
  }

  .dark {
    /* .dark, derived from the "dark" key ‚ÜîÔ∏è themes['dark'] */
    --some-token: darkValue;
    /* ... */
  }

  .other {
    /* .other, derived from the "other" key ‚ÜîÔ∏è themes['other'] */
    --some-token: otherValue;
    /* ... */
  }
}
```

<StoryHeading label="createTailwindThemeConfigFile" as="h4" />

A function that will generate a config file that links the [theme options](https://tailwindcss.com/docs/theme#configuration-reference) provided by Tailwind with the CSS custom property values generated using the `createCSSTokensFile` function.

This function expects one argument:

- The file path where the `css` file will be created

**Usage:**

```tsx
// overrideTailwindConfig.ts
createTailwindThemeConfigFile('./tailwind.theme.js)

```

Executing `overrideTailwindConfig.ts`, will generate a `tailwind.theme.js` file with the following structure:

```js
// tailwind.theme.js
module.exports = {
  ...,
  screens: {
    sm: 'var(--some-value)',
    md: 'var(--some-other-value)',
  },
  spacing: {
    sm: 'var(--some-value)',
    md: 'var(--some-value)'
  }
  ...
}
```

‚¨áÔ∏è Then, inside your Tailwind config file

```js
// tailwind.config.js
const themeConf = require('./tailwind.theme.js')

module.exports = {
  theme: {
    ...themeConf, // ‚¨ÖÔ∏è replacing default Tailwind theme with our own
  },
  content: ['...'],
}
```

<StoryHeading label="Practical Example" as="h3" />

- For a clearer illustration of how these two functions (**createCSSTokensFile** & **createTailwindThemeConfigFile**) can be utilized, here's a practical example of integrating them into your project ‚¨áÔ∏è

```tsx
// createThemeConfig.ts üõ†Ô∏è
import { themes } from '/myThemes'

createTailwindThemeConfigFile('./tailwind.theme.js') // ‚¨ÖÔ∏è will generate the Tailwind theme config file
createCSSTokensFile('./tailwind.css', themes) // ‚¨ÖÔ∏è will generate the CSS tokens file
```

```js
// tailwind.config.js
const themeConf = require('./tailwind.theme.js') // ‚¨ÖÔ∏è generated by executing `createThemeConfig.ts` üõ†Ô∏è

module.exports = {
  theme: {
    ...themeConf, // ‚¨ÖÔ∏è replacing default Tailwind theme with our own
  },
  content: ['...'],
}
```

```tsx
// some file in your application where you can import styles

import '../tailwind.css' // ‚¨ÖÔ∏è generated by executing `createThemeConfig.ts` üõ†Ô∏è

...
```

```json
// package.json
{
  ...
  "scripts": {
    ...,
    "start": "npm run create:theme-config && start stuff",
    "create:theme-config": "ts-node-esm createThemeConfig.ts", // ‚¨ÖÔ∏è executing `createThemeConfig.ts` üõ†Ô∏è
    ...
  }
}
```
