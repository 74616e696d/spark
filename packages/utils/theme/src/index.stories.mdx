import { Meta } from '@storybook/blocks'
import { StoryHeading } from '@docs/helpers/StoryHeading'

<Meta title="utils/Theme" />

# Theme

- [Theme](#theme-interface)
- [defaultTheme](#default-theme)
- [createTheme](#createtheme)
- [createCSSTokensFile](#createcsstokensfile)
- [createTailwindThemeConfigFile](#createtailwindthemeconfigfile)
- [Practical example](#practical-example)

> **Note**
>
> Spark Design System is built using the **Tailwind CSS** framework

---

The **`packages/utils/theme`** exposes the following:

```tsx
import {
  Theme,
  defaultTheme,
  createTheme,
  createCSSTokensFile,
  createTailwindThemeConfigFile,
} from '@spark-ui/theme-utils'
```

<StoryHeading label="theme interface" as="h4" />

- `Theme`, the TypeScript interface for our theme

<StoryHeading label="default theme" as="h4" />

- `defaultTheme`, our default theme, represented as an `Object`

<StoryHeading label="createTheme" as="h4" />

- A function, that enables one to create a new theme by modifying specific values from the default theme without having to define a completely new theme from scratch.

This function expects one argument:

- A partial theme object which holds the theme values that need to be customized or overridden

**Usage:**

```tsx
const someTheme: PartialDeep<Theme> = { ... }
const newTheme = createTheme(someTheme) // Theme

```

<StoryHeading label="createCSSTokensFile" as="h4" />

- A function, that will generate a `css` file containing all of the theme tokens, represented as CSS custom properties.

This function expects two arguments:

- The file path where the `css` file will be created
- A `Record` (with a required key of "default") of themes that will be included in the `css` file

**Usage:**

- Let's create a file (named `createTokens.ts` in our example) that will call this function

```tsx
// createTokens.ts
const defaultTheme: Theme = { ... }
const darkTheme: Theme = { ... }
const someOtherTheme: Theme = { ... }

const themes = {
  default: defaultTheme,
  dark: darkTheme,
  other: someOtherTheme
}

createCSSTokensFile('./somePath.css', themes)

```

- Executing `createTokens.ts` will generate a `somePath.css` file with the following structure:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* :root, derived from the "default" key ↔️ themes.default */
    --some-token: someValue;
    --some-other-token: otherValue;
    ...;
  }

  .dark {
    /* .dark, derived from the "dark" key ↔️ themes.dark */
    --some-token: foo;
    --some-other-token: bar;
    ...;
  }

  .other {
    /* .other, derived from the "other" key ↔️ themes.other */
    --some-token: lorem;
    --some-other-token: ipsum;
    ...;
  }
}
```

<StoryHeading label="createTailwindThemeConfigFile" as="h4" />

A function that will generate a config file that links the [theme options](https://tailwindcss.com/docs/theme#configuration-reference) provided by Tailwind with the CSS custom property values generated using the `createCSSTokensFile` function.

This function expects one argument:

- The file path where the `css` file will be created

**Usage:**

- Let's create a file (named `overrideTailwindConfig.ts` in our example) that will call this function

```tsx
// overrideTailwindConfig.ts
createTailwindThemeConfigFile('./tailwind.theme.js)

```

- Executing `overrideTailwindConfig.ts` will generate a `tailwind.theme.js` file with the following structure:

```js
// tailwind.theme.js
module.exports = {
  ...,
  screens: {
    sm: 'var(--some-value)',
    md: 'var(--some-other-value)',
  },
  spacing: {
    sm: 'var(--some-foo)',
    md: 'var(--some-bar)'
  }
  ...
}
```

- Then, inside your Tailwind config file, include a reference to the file that will be generated upon executing `overrideTailwindConfig.ts`

```js
// tailwind.config.js
const themeConf = require('./tailwind.theme.js') // ⬅️ generated by executing `overrideTailwindConfig.ts`

module.exports = {
  theme: {
    ...themeConf, // ⬅️ replacing default Tailwind theme with our own
  },
  content: ['...'],
}
```

<StoryHeading label="Practical Example" as="h3" />

- For a more detailed understanding of how to employ these two functions together (**createCSSTokensFile** & **createTailwindThemeConfigFile**), here's a practical example of integrating them into your project:

1️⃣. Create a file (named `createThemeConfig.ts` in this example) that will call both of these functions

```tsx
// createThemeConfig.ts
import { createCSSTokensFile, createTailwindThemeConfigFile } from '@spark-ui/theme-utils'
import { themes } from '/myThemes'

createTailwindThemeConfigFile('./tailwind.theme.js') // ⬅️ will generate the Tailwind theme config file
createCSSTokensFile('./tailwind.css', themes) // ⬅️ will generate the CSS tokens file
```

2️⃣ a. Inside the Tailwind config file, include a reference to the file that will be generated upon executing the file from step 1

```js
// tailwind.config.js
const themeConf = require('./tailwind.theme.js') // ⬅️ generated by executing `createThemeConfig.ts`

module.exports = {
  theme: {
    ...themeConf, // ⬅️ replacing default Tailwind theme with our own
  },
  content: ['...'],
}
```

2️⃣ b. Inside a file in your application where you import your global styles, include a reference to the file that will be generated upon executing the file from step 1

If you are using **Next.js**, that would be `_app.tsx`

```tsx
// some file in your application where you can import global styles

import '../tailwind.css' // ⬅️ generated by executing `createThemeConfig.ts`
```

3️⃣. Inside your `package.json`, add a script that will execute the file from step 1, and make sure to run that script before you start your application

```json
// package.json
{
  ...
  "scripts": {
    ...,
    "start": "npm run create:theme-config && start your-app",
    "create:theme-config": "ts-node-esm createThemeConfig.ts", // ⬅️ executing `createThemeConfig.ts`
    ...
  }
}
```
